<div style="margin-bottom:1em;">
  <button onclick="showView('card')" style="margin-right:5px;">카드 뷰</button>
  <button onclick="showView('list')">리스트 뷰</button>
</div>

<div id="card-view">
  {{ range .Items }}
    {{ $item := . }}
    {{ $link := $item.RelPermalink }}
    {{ $target := "" }}
    {{ if $item.Params.external_link }}
      {{ $link = $item.Params.external_link }}
      {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
    {{ end }}
    {{ $has_attachments := partial "functions/has_attachments" $item }}
    {{ $summary := "" }}
    {{ if $item.Params.summary }}
      {{ $summary = $item.Params.summary | markdownify | emojify }}
    {{ else if $item.Params.abstract }}
      {{ $summary = $item.Params.abstract | markdownify | emojify | truncate (site.Params.abstract_length | default 135) }}
    {{ else if $item.Summary }}
      {{ $summary = $item.Summary }}
    {{ end }}

    <div class="media stream-item view-compact">
      <div class="media-body">
        <div class="section-subheading article-title mb-0 mt-0" style="justify-content: center; align-items: center; text-align: justify; text-justify: auto; font-size: 0.99em;">
          <a href="{{$link}}" {{ $target | safeHTMLAttr }}>{{ $item.Title }}</a>
        </div>
        {{ with $summary }}
        <a href="{{ $link }}" {{ $target | safeHTMLAttr }} class="summary-link">
          <div class="article-style">
            {{.}}
          </div>
        </a>
        {{ end }}
        <div class="stream-meta article-metadata">
          {{ if $item.Params.authors }}
            <div>{{ partial "page_metadata_authors" $item }}</div>
          {{ end }}
        </div>
        {{ if $has_attachments }}
        <div class="btn-links">
          {{ partial "page_links" (dict "page" $item "is_list" 1) }}
        </div>
        {{ end }}
        <div style="margin-bottom: 50px;"></div>
      </div>
    </div>
  {{ end }}
</div>

<div id="list-view" style="display:none;">
  <ol>
    {{ range .Items }}
      {{ $item := . }}
      {{ $link := $item.RelPermalink }}
      {{ $target := "" }}
      {{ if $item.Params.external_link }}
        {{ $link = $item.Params.external_link }}
        {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
      {{ end }}
      <li style="margin-bottom:1.2em; line-height:1.6;">
        {{ with $item.Params.authors }}
          {{ delimit . ", " }}.
        {{ end }}
        <b>
          {{ if $link }}
            <a href="{{$link}}" {{ $target | safeHTMLAttr }}>{{ $item.Title }}</a>
          {{ else }}
            {{ $item.Title }}
          {{ end }}
        </b>.
        {{ with $item.Params.publication }}
          <i>{{ . }}</i>,
        {{ end }}
        {{ with $item.Params.date }}
          {{ (time .).Year }}.
        {{ end }}
        {{ with $item.Params.url_pdf }}
          <a href="{{ . }}" target="_blank">[PDF]</a>
        {{ end }}
      </li>
    {{ end }}
  </ol>
</div>

<script>
function showView(type) {
  document.getElementById('card-view').style.display = (type === 'card') ? 'block' : 'none';
  document.getElementById('list-view').style.display = (type === 'list') ? 'block' : 'none';
}
</script>
